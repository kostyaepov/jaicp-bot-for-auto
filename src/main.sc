// Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ±Ğ¾Ñ‚Ğ°
start
    + (Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚|Ğ·Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹|Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ|Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑ|Ğ´Ğ¾Ğ±Ñ€Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ|Ğ´Ğ¾Ğ±Ñ€Ñ‹Ğ¹ Ğ²ĞµÑ‡ĞµÑ€|Ğ´Ğ¾Ğ±Ñ€Ğ¾Ğµ ÑƒÑ‚Ñ€Ğ¾)
        ĞŸÑ€Ğ¸Ğ²ĞµÑ‚! Ğ¯ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ñƒ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ°Ğ²Ñ‚Ğ¾ ğŸš—  
        Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ¼Ğ°Ñ€ĞºÑƒ, Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ, Ñ†ĞµĞ½Ñƒ, Ğ¿Ñ€Ğ¾Ğ±ĞµĞ³ Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹.

    + (ĞĞ°Ğ¹Ğ´Ğ¸|ĞŸĞ¾Ğ´Ğ±ĞµÑ€Ğ¸|ĞŸĞ¾ĞºĞ°Ğ¶Ğ¸) {Ğ¼Ğ°Ñ€ĞºĞ°}
        $session.make = {Ğ¼Ğ°Ñ€ĞºĞ°}
        -> search_state

    + (ĞĞ°Ğ¹Ğ´Ğ¸|ĞŸĞ¾Ğ´Ğ±ĞµÑ€Ğ¸|ĞŸĞ¾ĞºĞ°Ğ¶Ğ¸) {Ğ¼Ğ°Ñ€ĞºĞ°} {Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ}
        $session.make = {Ğ¼Ğ°Ñ€ĞºĞ°}
        $session.model = {Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ}
        -> search_state

    + (ĞĞ°Ğ¹Ğ´Ğ¸|ĞŸĞ¾Ğ´Ğ±ĞµÑ€Ğ¸|ĞŸĞ¾ĞºĞ°Ğ¶Ğ¸) {Ğ¼Ğ°Ñ€ĞºĞ°} Ğ´Ğ¾ {Ñ†ĞµĞ½Ğ°} Ñ€ÑƒĞ±Ğ»ĞµĞ¹
        $session.make = {Ğ¼Ğ°Ñ€ĞºĞ°}
        $session.max_price = {Ñ†ĞµĞ½Ğ°}
        -> search_state

    + (ĞĞ°Ğ¹Ğ´Ğ¸|ĞŸĞ¾ĞºĞ°Ğ¶Ğ¸|ĞŸĞ¾Ğ¼Ğ¾Ğ³Ğ¸ Ğ½Ğ°Ğ¹Ñ‚Ğ¸) {Ğ¼Ğ°Ñ€ĞºĞ°} {Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ} Ğ´Ğ¾ {Ñ†ĞµĞ½Ğ°} Ñ€ÑƒĞ±Ğ»ĞµĞ¹ Ñ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ³Ğ¾Ğ¼ Ğ´Ğ¾ {Ğ¿Ñ€Ğ¾Ğ±ĞµĞ³} ĞºĞ¼
        $session.make = {Ğ¼Ğ°Ñ€ĞºĞ°}
        $session.model = {Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ}
        $session.max_price = {Ñ†ĞµĞ½Ğ°}
        $session.max_mileage = {Ğ¿Ñ€Ğ¾Ğ±ĞµĞ³}
        -> search_state

// Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ°Ğ²Ñ‚Ğ¾
search_state
    // Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµĞ¼ URL Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ğ¼Ğ¸
    $query = "https://crwl.ru/api/rest/latest/get_ads/?api_key=4309e95538b30c8ae3998ce980df9a1f"
    if $session.make
        $query += "&make=" + $session.make
    if $session.model
        $query += "&model=" + $session.model
    if $session.max_price
        $query += "&max_price=" + $session.max_price
    if $session.max_mileage
        $query += "&max_mileage=" + $session.max_mileage

    // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ API-Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
    $http.get($query) > response

    // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
    if response.status == "Failed"
        âŒ ĞÑˆĞ¸Ğ±ĞºĞ° API: $response.msg
        ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ¿Ğ¾Ğ·Ğ¶Ğµ.
        -> start

    $cars = response.cars
    if $cars.size > 0
        âœ… ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ²:
        for $car in $cars[0:3] // ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ 3 Ğ¾Ğ±ÑŠÑĞ²Ğ»ĞµĞ½Ğ¸Ñ
            â¤ **$car.make $car.model $car.year**
            ğŸ’° Ğ¦ĞµĞ½Ğ°: **$car.price â‚½**
            ğŸš— ĞŸÑ€Ğ¾Ğ±ĞµĞ³: **$car.mileage ĞºĞ¼**
            â›½ Ğ¢Ğ¾Ğ¿Ğ»Ğ¸Ğ²Ğ¾: **$car.fuel_type**
            ğŸ“ Ğ“Ğ¾Ñ€Ğ¾Ğ´: **$car.region**
            ğŸ”— [Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ğ¾Ğ±ÑŠÑĞ²Ğ»ĞµĞ½Ğ¸Ğµ]($car.url)
        ğŸ” Ğ¥Ğ¾Ñ‚Ğ¸Ñ‚Ğµ ÑƒÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ¸ÑĞº?
    else
        âŒ ĞĞ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ ğŸ˜¢ ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹.
        -> start
